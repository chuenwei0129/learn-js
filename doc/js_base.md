# JavaScript ä»é›¶å•æ’(ä¸€)<!-- omit in toc -->

<!-- markdown="1" is required for GitHub Pages to render the TOC properly. -->

<details markdown="1">
  <summary>ğŸŒ³ <strong>ç›®å½•</strong></summary>
<br>

- [æ•°æ®ç±»å‹](#æ•°æ®ç±»å‹)
  - [å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹](#å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹)
  - [å‡½æ•°å‚æ•°æŒ‰å€¼ä¼ é€’](#å‡½æ•°å‚æ•°æŒ‰å€¼ä¼ é€’)
- [ç±»å‹æ£€æµ‹](#ç±»å‹æ£€æµ‹)
  - [typeof](#typeof)
  - [instanceof](#instanceof)
  - [Object.prototype.toString](#objectprototypetostring)
  - [isObject](#isobject)
  - [isEmptyObject](#isemptyobject)
  - [isInteger](#isinteger)
  - [`Object.is` / `Array.isArray` / `Number.isInteger` / `isNaN` / `Number.isNaN`](#objectis--arrayisarray--numberisinteger--isnan--numberisnan)
  - [isPrime](#isprime)
- [ç±»å‹è½¬æ¢](#ç±»å‹è½¬æ¢)
  - [è½¬æ¢æˆå¸ƒå°”å€¼](#è½¬æ¢æˆå¸ƒå°”å€¼)
  - [è½¬æ¢æˆæ•°å­—](#è½¬æ¢æˆæ•°å­—)
  - [è½¬æ¢æˆå­—ç¬¦ä¸²](#è½¬æ¢æˆå­—ç¬¦ä¸²)
  - [è½¬æ¢æˆ JSON](#è½¬æ¢æˆ-json)
  - [åŸå§‹ç±»å‹ä¸å®ä¾‹å¯¹è±¡çš„è‡ªåŠ¨è½¬æ¢](#åŸå§‹ç±»å‹ä¸å®ä¾‹å¯¹è±¡çš„è‡ªåŠ¨è½¬æ¢)
  - [å¯¹è±¡è½¬æ¢æˆåŸå§‹ç±»å‹](#å¯¹è±¡è½¬æ¢æˆåŸå§‹ç±»å‹)
  - [é¢è¯•é¢˜ï¼šå¦‚ä½•è®© `if(a == 1 && a == 2 && a == 3)` æ¡ä»¶æˆç«‹ï¼Ÿ](#é¢è¯•é¢˜å¦‚ä½•è®©-ifa--1--a--2--a--3-æ¡ä»¶æˆç«‹)
  - [é¢è¯•é¢˜ï¼šä¸ºä»€ä¹ˆ `['1', '2', '3'].map(parseInt)` è¿”å› `[1,NaN,NaN]` ï¼Ÿ](#é¢è¯•é¢˜ä¸ºä»€ä¹ˆ-1-2-3mapparseint-è¿”å›-1nannan-)
  - [é¢è¯•é¢˜ï¼šè¯·å®ç°ä¸€ä¸ª add å‡½æ•°ï¼Œæ»¡è¶³ä»¥ä¸‹åŠŸèƒ½](#é¢è¯•é¢˜è¯·å®ç°ä¸€ä¸ª-add-å‡½æ•°æ»¡è¶³ä»¥ä¸‹åŠŸèƒ½)
- [è¿ç®—ç¬¦](#è¿ç®—ç¬¦)
  - [äºŒå…ƒè¿ç®—ç¬¦ + è¿æ¥å­—ç¬¦ä¸²](#äºŒå…ƒè¿ç®—ç¬¦--è¿æ¥å­—ç¬¦ä¸²)
  - [æ•°å­—è½¬åŒ–ï¼Œä¸€å…ƒè¿ç®—ç¬¦ +](#æ•°å­—è½¬åŒ–ä¸€å…ƒè¿ç®—ç¬¦-)
  - [æ¯”è¾ƒè¿ç®—ç¬¦](#æ¯”è¾ƒè¿ç®—ç¬¦)
  - [åŸåœ°ä¿®æ”¹ / è‡ªå¢ / è‡ªå‡](#åŸåœ°ä¿®æ”¹--è‡ªå¢--è‡ªå‡)
  - [ä½è¿ç®—ç¬¦](#ä½è¿ç®—ç¬¦)
  - [é€—å·è¿ç®—ç¬¦](#é€—å·è¿ç®—ç¬¦)
  - [é€»è¾‘è¿ç®—ç¬¦](#é€»è¾‘è¿ç®—ç¬¦)
    - [æˆ–è¿ç®—å¯»æ‰¾ç¬¬ä¸€ä¸ªçœŸå€¼](#æˆ–è¿ç®—å¯»æ‰¾ç¬¬ä¸€ä¸ªçœŸå€¼)
    - [ä¸è¿ç®—å¯»æ‰¾ç¬¬ä¸€ä¸ªå‡å€¼](#ä¸è¿ç®—å¯»æ‰¾ç¬¬ä¸€ä¸ªå‡å€¼)
    - [æ„Ÿå¹ç¬¦å· `!` è¡¨ç¤ºå¸ƒå°”éè¿ç®—ç¬¦](#æ„Ÿå¹ç¬¦å·--è¡¨ç¤ºå¸ƒå°”éè¿ç®—ç¬¦)
  - [ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ '??'](#ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦-)
  - [å¯é€‰é“¾ "?."](#å¯é€‰é“¾-)
  - [è¿ç®—ç¬¦ä¼˜å…ˆçº§](#è¿ç®—ç¬¦ä¼˜å…ˆçº§)
- [å¾ªç¯](#å¾ªç¯)


## æ•°æ®ç±»å‹

**JavaScript** ä¸­æœ‰å…«ç§åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼ˆå‰ä¸ƒç§ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿç§°ä¸ºåŸå§‹ç±»å‹ï¼Œè€Œ `object` ä¸ºå¤æ‚æ•°æ®ç±»å‹ï¼‰ã€‚

- **Numberï¼š** ç”¨äºä»»ä½•ç±»å‹çš„æ•°å­—ï¼šæ•´æ•°æˆ–æµ®ç‚¹æ•°ï¼Œåœ¨ `Â±(2^53-1)` èŒƒå›´å†…çš„æ•´æ•°ã€‚åœ¨ JavaScript é‡Œï¼Œæ•°å­—å‡ä¸º[åŸºäº IEEE 754 æ ‡å‡†çš„åŒç²¾åº¦ 64 ä½çš„æµ®ç‚¹æ•°](https://link.juejin.cn/?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E9%259B%2599%25E7%25B2%25BE%25E5%25BA%25A6%25E6%25B5%25AE%25E9%25BB%259E%25E6%2595%25B8)
- **Bigintï¼š** ç”¨äºä»»æ„é•¿åº¦çš„æ•´æ•°ã€‚
- **Stringï¼š** ç”¨äºå­—ç¬¦ä¸²ï¼šä¸€ä¸ªå­—ç¬¦ä¸²å¯ä»¥åŒ…å« `0` ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥æ²¡æœ‰å•ç‹¬çš„å•å­—ç¬¦ç±»å‹ã€‚
- **Booleanï¼š** ç”¨äº `true` å’Œ `false`ã€‚
- **Nullï¼š** ç”¨äºæœªçŸ¥çš„å€¼ â€”â€” åªæœ‰ä¸€ä¸ª `null` å€¼çš„ç‹¬ç«‹ç±»å‹ã€‚
- **Undefinedï¼š** ç”¨äºæœªå®šä¹‰çš„å€¼ â€”â€” åªæœ‰ä¸€ä¸ª `undefined` å€¼çš„ç‹¬ç«‹ç±»å‹ã€‚
- **Symbolï¼š** ç”¨äºå”¯ä¸€çš„æ ‡è¯†ç¬¦ã€‚
- **Objectï¼š** ç”¨äºæ›´å¤æ‚çš„æ•°æ®ç»“æ„ã€‚

### å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹

**å€¼ç±»å‹**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰ã€æ•°å€¼ï¼ˆnumberï¼‰ã€å¸ƒå°”å€¼ï¼ˆbooleanï¼‰ã€undefinedã€nullã€symbolã€bigInt

> å€¼ç±»å‹ä¿å­˜åœ¨æ ˆä¸­ï¼Œå€¼ç±»å‹èµ‹å€¼ä¹‹åä¸¤ä¸ªå˜é‡äº’ä¸å½±å“

```js
let foo = 1
let bar = foo

bar = 2
console.log(foo, bar) // 1, 2
```

**å¼•ç”¨ç±»å‹**ï¼šå¯¹è±¡ï¼ˆObjectï¼‰ã€æ•°ç»„ï¼ˆArrayï¼‰ã€å‡½æ•°ï¼ˆFunctionï¼‰...

> å¼•ç”¨ç±»å‹ä¿å­˜åœ¨å †ä¸­ï¼Œæ ˆä¸­ä¿å­˜çš„æ˜¯å¼•ç”¨ç±»å‹çš„æŒ‡é’ˆï¼Œå¼•ç”¨ç±»å‹èµ‹å€¼ä¹‹åï¼Œä¸¤ä¸ªå˜é‡å…·æœ‰ç›¸åŒçš„å¼•ç”¨ï¼ŒæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œç›¸äº’ä¹‹é—´æœ‰å½±å“

```js
let foo = { a: 1, b: 2 }
var bar = foo

bar.a = 2

console.log(foo, bar) // { a: 2, b: 2 }, { a: 2, b: 2 }
```

### å‡½æ•°å‚æ•°æŒ‰å€¼ä¼ é€’

> åœ¨å‘å‚æ•°ä¼ é€’åŸºæœ¬ç±»å‹çš„å€¼æ—¶ï¼Œè¢«ä¼ é€’çš„å€¼ä¼šè¢«å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼›åœ¨å‘å‚æ•°ä¼ é€’å¼•ç”¨ç±»å‹çš„å€¼æ—¶ï¼Œä¼šæŠŠè¿™ä¸ªå¼•ç”¨ç±»å‹çš„åœ°å€å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå› æ­¤åœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹å‚æ•°ï¼Œå°†ä¼šå½±å“åˆ°åŸå§‹å€¼ã€‚

```js
function test(person) {
  person.name = 'chu'
  person = { name: 'bar', age: 18 }
  return person
}
const p1 = { name: 'foo', age: 25 }
const p2 = test(p1)
console.log(p1) // -> { name: 'chu', age: 25 }
console.log(p2) // -> { name: 'bar', age: 18 }
```

## ç±»å‹æ£€æµ‹

### typeof

`typeof` è¿ç®—ç¬¦è¿”å›å‚æ•°çš„ç±»å‹ã€‚

å®ƒæ”¯æŒä¸¤ç§è¯­æ³•å½¢å¼ï¼š

- ä½œä¸ºè¿ç®—ç¬¦ï¼š`typeof x`ã€‚
- å‡½æ•°å½¢å¼ï¼š`typeof(x)`ã€‚

```js
console.log(typeof null) // 'object'
console.log(typeof Array.isArray) // 'function'
console.log(typeof typeof Array.isArray) // 'string'
```

### instanceof

```js
function myInstanceof(left, right) {
  //åŸºæœ¬æ•°æ®ç±»å‹ç›´æ¥è¿”å›false
  if (typeof left !== 'object' || left === null) return false
  //getPrototypeOf æ˜¯ Object å¯¹è±¡è‡ªå¸¦çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç›¸å½“äº xxx.__proto__
  let proto = Object.getPrototypeOf(left)
  while (true) {
    //æŸ¥æ‰¾åˆ°å°½å¤´ï¼Œè¿˜æ²¡æ‰¾åˆ°
    if (proto === null) return false
    //æ‰¾åˆ°ç›¸åŒçš„åŸå‹å¯¹è±¡
    if (proto === right.prototype) return true
    proto = Object.getPrototypeOf(proto)
  }
}

console.log(myInstanceof(Number(1), Number)) // false
console.log(myInstanceof(new Date(), Date)) // true
```

### Object.prototype.toString

```js
Object.prototype.toString.call(2) // "[object Number]"
Object.prototype.toString.call('') // "[object String]"
Object.prototype.toString.call(true) // "[object Boolean]"
Object.prototype.toString.call(undefined) // "[object Undefined]"
Object.prototype.toString.call(null) // "[object Null]"
Object.prototype.toString.call(Math) // "[object Math]"
Object.prototype.toString.call({}) // "[object Object]"
Object.prototype.toString.call([]) // "[object Array]"
Object.prototype.toString.call(/\d/) // "[object RegExp]"
Object.prototype.toString.call(Array.isArray) // "[object Function]"
```

### isObject

```js
// Object æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæ€»æ˜¯è¿”å›è¯¥å¯¹è±¡ï¼Œå¯¹å¯¹è±¡è‡ªèº«ä½¿ç”¨ä¸å‘ç”Ÿç±»å‹è½¬æ¢ã€‚
Object(null) === null // false

function isObject(value) {
  return value === Object(value)
}
```

### isEmptyObject

```js
function isEmptyObject(obj) {
  if (typeof obj !== 'object' || obj === null) return false
  return Object.keys(obj).length === 0
}

console.log(isEmptyObject({})) // true
console.log(isEmptyObject([])) // true ç©ºæ•°ç»„ç®—ç©ºå¯¹è±¡
```

### isInteger

```js
// æ•´æ•°å–æ•´è¿˜æ˜¯æ•´æ•°
function isInteger(num) {
  return typeof num === 'number' && (num | 0) === num
}

console.log(isInteger(1)) // true
console.log(isInteger(1.1)) // false
```

### `Object.is` / `Array.isArray` / `Number.isInteger` / `isNaN` / `Number.isNaN`

```js
console.log(Object.is(+0, -0)) // false
console.log(Object.is(NaN, NaN)) // true

const foo = { a: 1 };
const bar = { a: 1 };
Object.is(foo, foo);         // true
Object.is(foo, bar);         // false

console.log(Array.isArray([])) // true
console.log(Array.isArray({})) // false

console.log(Number.isInteger('1')) // false
console.log(Number.isInteger(1)) //true

console.log(Number.isNaN(NaN)) // true
console.log(isNaN(NaN)) // true

console.log(isNaN({})) // true å…ˆ Number(...)
console.log(Number.isNaN({})) // false
```

### isPrime

```js
// ç´ æ•°åªèƒ½è¢«è‡ªå·±å’Œ 1 æ•´é™¤ä¸å« 1 , 2 æ˜¯ç´ æ•°
// åˆ¤æ–­ç´ æ•°åªè¦åˆ¤æ–­åˆ°å¼€æ–¹å°±è¡Œï¼Œfalse è·³å‡ºæ¡ä»¶æ˜¯ num % i === 0

function isPrime(num) {
  if (typeof num === 'number' && (num | 0) === num) {
    if (num <= 1) return false
    const N = Math.floor(Math.sqrt(num))
    let primeState = true
    for (let i = 2; i <= N; i++) {
      if (num % i === 0) {
        primeState = false
        break
      }
    }
    return primeState
  } else {
    return false
  }
}

console.log(isPrime(2)) // true
console.log(isPrime(87)) // false
console.log(isPrime(77)) // false
```

## ç±»å‹è½¬æ¢

### è½¬æ¢æˆå¸ƒå°”å€¼

åœ¨ JavaScript ä¸­ï¼Œåªæœ‰ `7` ç§å€¼å¯ä»¥è¢«è½¬æ¢æˆ `false`ï¼Œå…¶ä»–éƒ½ä¼šè¢«è½¬æ¢æˆ `true`ã€‚

```js
console.log(Boolean(false)) // false

console.log(Boolean(undefined)) // false
console.log(Boolean(null)) // false
console.log(Boolean(+0)) // false
console.log(Boolean(-0)) // false
console.log(Boolean(NaN)) // false
console.log(Boolean('')) // false
console.log(Boolean(0n)) // false
```

### è½¬æ¢æˆæ•°å­—

```js
console.log(Number('')) // 0
console.log(Number(undefined)) // NaN
console.log(Number(null)) // 0
console.log(Number([])) // 0
console.log(Number([1, 2, 3])) // NaN
console.log(Number({})) // NaN
```

### è½¬æ¢æˆå­—ç¬¦ä¸²

```js
console.log(String([]) === '') // true
console.log(String({})) // "[object Object]"
```

### è½¬æ¢æˆ JSON

```js
const obj = {
  toJSON() {
    return 'hello world'
  }
}

console.log(JSON.stringify(obj)) // "hello world"
```

### åŸå§‹ç±»å‹ä¸å®ä¾‹å¯¹è±¡çš„è‡ªåŠ¨è½¬æ¢

```js
console.log('hello world'.length) // 11
```

> ä¸Šé¢ä»£ç ä¸­ï¼Œ`'hello world'` æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæœ¬èº«ä¸æ˜¯å¯¹è±¡ï¼Œä¸èƒ½è°ƒç”¨ length å±æ€§ã€‚
>
> JavaScript å¼•æ“è‡ªåŠ¨å°†å…¶è½¬ä¸ºåŒ…è£…å¯¹è±¡ï¼Œåœ¨è¿™ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ length å±æ€§ã€‚
>
> è°ƒç”¨ç»“æŸåï¼Œè¿™ä¸ªä¸´æ—¶å¯¹è±¡å°±ä¼šè¢«é”€æ¯ã€‚è¿™å°±å«åŸå§‹ç±»å‹ä¸å®ä¾‹å¯¹è±¡çš„è‡ªåŠ¨è½¬æ¢ã€‚

### å¯¹è±¡è½¬æ¢æˆåŸå§‹ç±»å‹

```js
const obj = {
  value: 3,
  valueOf: () => 4,
  toString: () => '5',
  [Symbol.toPrimitive]: () => 6
}
```

- ä¸‰è€…éƒ½å­˜åœ¨ï¼Œè½¬æ¢æˆåŸå§‹ç±»å‹ä¼šä¼˜å…ˆè°ƒç”¨ `[Symbol.toPrimitive]` çš„è¿”å›å€¼ã€‚

  ```js
  console.log(String(obj)) // '6'
  console.log(Number(obj)) // 6
  ```

- `[Symbol.toPrimitive]` ä¸å­˜åœ¨ï¼Œ`String` ä¼šè°ƒç”¨ `toString`ï¼Œ`Number` ä¼šè°ƒç”¨ `valueOf`ã€‚

  ```js
  console.log(String(obj)) // '5'
  console.log(Number(obj)) // 4
  ```

- åªæœ‰ `toString` å­˜åœ¨ï¼Œ`String` ä¼šè°ƒç”¨ `toString`ï¼Œ`Number` ä¹Ÿä¼šè°ƒç”¨ `toString`ï¼Œç„¶åä¼šä½¿ç”¨ `Number` æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—ã€‚

  ```js
  console.log(String(obj)) // '5'
  console.log(Number(obj)) // 5
  ```

- åªæœ‰ `valueOf` å­˜åœ¨ï¼Œ`Number` ä¼šè°ƒç”¨ `valueOf`ï¼Œ`String` ä¼šè°ƒç”¨ `Object.prototype.toString`

  ```js
  console.log(String(obj)) // '[object Object]'
  console.log(Number(obj)) // 4
  ```

- éƒ½ä¸å­˜åœ¨ï¼Œ`String` ä¼šè°ƒç”¨ `Object.prototype.toString`ï¼Œ`Number` ä¹Ÿä¼šè°ƒç”¨ `Object.prototype.toString`ï¼Œç„¶åä¼šä½¿ç”¨ `Number` æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—ã€‚

  ```js
  console.log(String(obj)) // '[object Object]'
  console.log(Number(obj)) // NaN
  ```

### é¢è¯•é¢˜ï¼šå¦‚ä½•è®© `if(a == 1 && a == 2 && a == 3)` æ¡ä»¶æˆç«‹ï¼Ÿ

è§£æ³•ä¸€ï¼š

```js
const a = {
  i: 1,
  toString() {
    return this.i++
  }
}
if (a == 1 && a == 2 && a == 3) {
  console.log('success')
}
```

è§£æ³•äºŒï¼š

```js
const a = {
  i: [1, 2, 3],
  valueOf() {
    return this.i.shift()
  }
}
if (a == 1 && a == 2 && a == 3) {
  console.log('success')
}
```

è§£æ³•ä¸‰ï¼š`===` ä¹Ÿè¡Œ

```js
window.val = 1
Object.defineProperty(window, 'a', {
  get: () => this.val++
})

if (a == 1 && a == 2 && a == 3) {
  console.log('success')
}
```

### é¢è¯•é¢˜ï¼šä¸ºä»€ä¹ˆ `['1', '2', '3'].map(parseInt)` è¿”å› `[1,NaN,NaN]` ï¼Ÿ

- `parseInt` æ–¹æ³•ç”¨äºå°†å­—ç¬¦ä¸²è½¬ä¸ºæ•´æ•°ã€‚
- `parseInt` çš„å‚æ•°ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¼šå…ˆè½¬ä¸ºå­—ç¬¦ä¸²å†è½¬æ¢ã€‚
- `parseInt` æ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼ˆ2 åˆ° 36 ä¹‹é—´ï¼‰ï¼Œå¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸æ˜¯æ•°å€¼ï¼Œä¼šè¢«è‡ªåŠ¨è½¬ä¸ºä¸€ä¸ªæ•´æ•°ã€‚è¿™ä¸ªæ•´æ•°åªæœ‰åœ¨ 2 åˆ° 36 ä¹‹é—´ï¼Œæ‰èƒ½å¾—åˆ°æœ‰æ„ä¹‰çš„ç»“æœï¼Œè¶…å‡ºè¿™ä¸ªèŒƒå›´ï¼Œåˆ™è¿”å› NaNã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°æ˜¯ `0`ã€`undefined` å’Œ `null`ï¼Œåˆ™ç›´æ¥å¿½ç•¥ã€‚
- äºŒè¿›åˆ¶åªèƒ½è½¬æ¢å«æœ‰ '0'ã€'1' çš„å­—ç¬¦ä¸²ï¼Œå…¶ä»–è¿›åˆ¶ä¹Ÿç±»ä¼¼ã€‚
- `parseInt` çš„è¿”å›å€¼åªæœ‰ä¸¤ç§å¯èƒ½ï¼Œè¦ä¹ˆæ˜¯ä¸€ä¸ªåè¿›åˆ¶æ•´æ•°ï¼Œè¦ä¹ˆæ˜¯ NaNã€‚

### é¢è¯•é¢˜ï¼šè¯·å®ç°ä¸€ä¸ª add å‡½æ•°ï¼Œæ»¡è¶³ä»¥ä¸‹åŠŸèƒ½

åˆ†æï¼šé“¾å¼è°ƒç”¨çš„å®ç°ï¼Ÿé“¾å¼æ“ä½œï¼Œæ“ä½œè¿”å›è‡ªèº«

å°è¯•ç‰›åˆ€ï¼š

```js
add(1);  // 1
add(1)(2);   // 3
add(1)(2)(3)ï¼›  // 6
```

å®ç°ï¼š

```js
const add = sum => {
  const fn = n => add(n + sum)
  fn.valueOf = () => sum
  return fn
}

console.log(+add(1)) // 1
console.log(+add(1)(2)) // 3
console.log(+add(1)(2)(3)) // 6
```

æ‰©å±•ï¼š

```js
add(1)(2, 3);   // 6
add(1, 2)(3);   // 6
add(1, 2, 3);   // 6
```

```js
const add = (...sums) => {
  sums = sums.reduce((acc, cur) => acc + cur)
  const fn = (...args) => {
    args = args.reduce((acc, cur) => acc + cur)
    return add(sums + args)
  }
  fn.valueOf = () => sums
  return fn
}

console.log(+add(1)(2, 3)) // 6
console.log(+add(1, 2)(3)) // 6
console.log(+add(1, 2, 3)) // 6
```

## è¿ç®—ç¬¦

### äºŒå…ƒè¿ç®—ç¬¦ + è¿æ¥å­—ç¬¦ä¸²

é€šå¸¸ï¼ŒåŠ å· `+` ç”¨äºæ±‚å’Œã€‚ä½†æ˜¯å¦‚æœåŠ å· `+` è¢«åº”ç”¨äºå­—ç¬¦ä¸²ï¼Œå®ƒå°†åˆå¹¶ï¼ˆè¿æ¥ï¼‰å„ä¸ªå­—ç¬¦ä¸²ï¼š

```js
console.log('2' + 2) // "22"
console.log(2 + 2 + '2') // "42"ï¼Œä¸æ˜¯ "222"
```

**æ³¨æ„ï¼šåªè¦ä»»æ„ä¸€ä¸ªè¿ç®—å…ƒæ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå¦ä¸€ä¸ªè¿ç®—å…ƒä¹Ÿå°†è¢«è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ã€‚**

å…¶ä»–ç®—æœ¯è¿ç®—ç¬¦åªå¯¹æ•°å­—èµ·ä½œç”¨ï¼Œå¹¶ä¸”æ€»æ˜¯å°†å…¶è¿ç®—å…ƒè½¬æ¢ä¸ºæ•°å­—ã€‚

### æ•°å­—è½¬åŒ–ï¼Œä¸€å…ƒè¿ç®—ç¬¦ +

ä¸€å…ƒè¿ç®—ç¬¦åŠ å·ï¼Œæˆ–è€…è¯´ï¼ŒåŠ å· + åº”ç”¨äºå•ä¸ªå€¼ï¼Œå¯¹æ•°å­—æ²¡æœ‰ä»»ä½•ä½œç”¨ã€‚ä½†æ˜¯å¦‚æœè¿ç®—å…ƒä¸æ˜¯æ•°å­—ï¼ŒåŠ å· + åˆ™ä¼šå°†å…¶è½¬åŒ–ä¸ºæ•°å­—ã€‚

ä¾‹å¦‚ï¼š

```js
// å¯¹æ•°å­—æ— æ•ˆ
let x = 1
console.log(+x) // 1

// è½¬åŒ–éæ•°å­—
console.log(+true) // 1
console.log(+'') // 0
```

å®ƒçš„æ•ˆæœå’Œ `Number(...)` ç›¸åŒã€‚

### æ¯”è¾ƒè¿ç®—ç¬¦

1. æ¯”è¾ƒè¿ç®—ç¬¦å§‹ç»ˆè¿”å›å¸ƒå°”å€¼ã€‚
1. å­—ç¬¦ä¸²çš„æ¯”è¾ƒï¼Œä¼šæŒ‰ç…§â€œè¯å…¸â€é¡ºåºé€å­—ç¬¦åœ°æ¯”è¾ƒå¤§å°ã€‚
1. å½“å¯¹ä¸åŒç±»å‹çš„å€¼è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œå®ƒä»¬ä¼šå…ˆè¢«è½¬åŒ–ä¸ºæ•°å­—ï¼ˆä¸åŒ…æ‹¬ä¸¥æ ¼ç›¸ç­‰æ£€æŸ¥ï¼‰å†è¿›è¡Œæ¯”è¾ƒã€‚
1. åœ¨éä¸¥æ ¼ç›¸ç­‰ `==` ä¸‹ï¼Œ`null` å’Œ `undefined` ç›¸ç­‰ä¸”å„è‡ªä¸ç­‰äºä»»ä½•å…¶ä»–çš„å€¼ã€‚
1. åœ¨ä½¿ç”¨ `>` æˆ– `<` è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œéœ€è¦æ³¨æ„å˜é‡å¯èƒ½ä¸º `null/undefined` çš„æƒ…å†µã€‚æ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯å•ç‹¬æ£€æŸ¥å˜é‡æ˜¯å¦ç­‰äº `null/undefined`ã€‚

```js
console.log(null > 0) // false (3)
console.log(null == 0) // false (4)
console.log(null >= 0) // true (3)
console.log(undefined > 0) // false (3)
console.log(undefined < 0) // false (3)
console.log(undefined == 0) // false (4)
```

### åŸåœ°ä¿®æ”¹ / è‡ªå¢ / è‡ªå‡

æˆ‘ä»¬ç»å¸¸éœ€è¦å¯¹ä¸€ä¸ªå˜é‡åšè¿ç®—ï¼Œå¹¶å°†æ–°çš„ç»“æœå­˜å‚¨åœ¨åŒä¸€ä¸ªå˜é‡ä¸­ã€‚

ä¾‹å¦‚ï¼š

```js
let n = 2
n += 5 // ç°åœ¨ n = 7ï¼ˆç­‰åŒäº n = n + 5ï¼‰
n *= 2 // ç°åœ¨ n = 14ï¼ˆç­‰åŒäº n = n * 2ï¼‰

console.log(n) // 14
```

è¿™ç±»è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ä¸æ™®é€šèµ‹å€¼è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ç›¸åŒï¼Œæ‰€ä»¥å®ƒä»¬åœ¨å¤§å¤šæ•°å…¶ä»–è¿ç®—ä¹‹åæ‰§è¡Œï¼š

```js
let n = 2
n *= 3 + 5

alert(n) // 16 ï¼ˆå³è¾¹éƒ¨åˆ†å…ˆè¢«è®¡ç®—ï¼Œç­‰åŒäº n *= 8ï¼‰
```

å¯¹ä¸€ä¸ªæ•°è¿›è¡ŒåŠ ä¸€ã€å‡ä¸€æ˜¯æœ€å¸¸è§çš„æ•°å­¦è¿ç®—ç¬¦ä¹‹ä¸€ã€‚

æ‰€ä»¥ï¼Œå¯¹æ­¤æœ‰ä¸€äº›ä¸“é—¨çš„è¿ç®—ç¬¦ï¼š

**è‡ªå¢ ++ å°†å˜é‡ä¸ 1 ç›¸åŠ ã€è‡ªå‡ -- å°†å˜é‡ä¸ 1 ç›¸å‡ï¼š**

```js
// ä»¥ä¸‹ä»£ç ä¸­å˜é‡ aã€bã€cã€d çš„æœ€ç»ˆå€¼åˆ†åˆ«æ˜¯å¤šå°‘ï¼Ÿ

let a = 1,
  b = 1
let c = ++a // ?
let d = b++ // ?

// a = 2, b = 2, c = 2, d = 1
```

### ä½è¿ç®—ç¬¦

ä½¿ç”¨ `&` è¿ç®—ç¬¦åˆ¤æ–­ä¸€ä¸ªæ•°çš„å¥‡å¶

```js
// å¶æ•° & 1 = 0
// å¥‡æ•° & 1 = 1
console.log(2 & 1) // 0
console.log(3 & 1) // 1
```

ä½¿ç”¨ `~`, `>>`, `<<`, `>>>`, `|` æ¥å–æ•´

```js
console.log(~~6.83) // 6
console.log(6.83 >> 0) // 6
console.log(6.83 << 0) // 6
console.log(6.83 | 0) // 6
// >>>ä¸å¯å¯¹è´Ÿæ•°å–æ•´
console.log(6.83 >>> 0) // 6
```

ä½¿ç”¨ `^` æ¥å®Œæˆå€¼äº¤æ¢

```js
var a = 5
var b = 8
a ^= b
b ^= a
a ^= b
console.log(a) // 8
console.log(b) // 5
```

### é€—å·è¿ç®—ç¬¦

é€—å·è¿ç®—ç¬¦ `,` æ˜¯æœ€å°‘è§æœ€ä¸å¸¸ä½¿ç”¨çš„è¿ç®—ç¬¦ä¹‹ä¸€ã€‚æœ‰æ—¶å€™å®ƒä¼šè¢«ç”¨æ¥å†™æ›´ç®€çŸ­çš„ä»£ç ï¼Œå› æ­¤ä¸ºäº†èƒ½å¤Ÿç†è§£ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£å®ƒã€‚

```js
let a = (1 + 2, 3 + 4)
console.log( a ) // 7ï¼ˆ3 + 4 çš„ç»“æœï¼‰

// ä¸€è¡Œä¸Šæœ‰ä¸‰ä¸ªè¿ç®—ç¬¦
for (a = 1, b = 3, c = a * b; a < 10; a++) {
 ...
}
```

é€—å·è¿ç®—ç¬¦èƒ½è®©æˆ‘ä»¬å¤„ç†å¤šä¸ªè¯­å¥ï¼Œä½¿ç”¨ `,` å°†å®ƒä»¬åˆ†å¼€ã€‚æ¯ä¸ªè¯­å¥éƒ½è¿è¡Œäº†ï¼Œä½†æ˜¯åªæœ‰æœ€åçš„è¯­å¥çš„ç»“æœä¼šè¢«è¿”å›ã€‚

### é€»è¾‘è¿ç®—ç¬¦

JavaScript ä¸­æœ‰ä¸‰ä¸ªé€»è¾‘è¿ç®—ç¬¦ï¼š`||`ï¼ˆæˆ–ï¼‰ï¼Œ`&&`ï¼ˆä¸ï¼‰ï¼Œ`!`ï¼ˆéï¼‰ã€‚

> éè¿ç®—ç¬¦ ! çš„ä¼˜å…ˆçº§åœ¨æ‰€æœ‰é€»è¾‘è¿ç®—ç¬¦é‡Œé¢æœ€é«˜ï¼Œæ‰€ä»¥å®ƒæ€»æ˜¯åœ¨ && å’Œ || ä¹‹å‰æ‰§è¡Œã€‚
> ä¸è¿ç®— && åœ¨æˆ–è¿ç®— || ä¹‹å‰è¿›è¡Œ
> ä¸è¿ç®— && çš„ä¼˜å…ˆçº§æ¯”æˆ–è¿ç®— || è¦é«˜ã€‚

æ‰€ä»¥ä»£ç  `a && b || c && d` è·Ÿ `&&` è¡¨è¾¾å¼åŠ äº†æ‹¬å·å®Œå…¨ä¸€æ ·ï¼š`(a && b) || (c && d)`ã€‚

#### æˆ–è¿ç®—å¯»æ‰¾ç¬¬ä¸€ä¸ªçœŸå€¼

æˆ–è¿ç®—ç¬¦ `||` åšäº†å¦‚ä¸‹çš„äº‹æƒ…ï¼š

- ä»å·¦åˆ°å³ä¾æ¬¡è®¡ç®—æ“ä½œæ•°ã€‚
- å¤„ç†æ¯ä¸€ä¸ªæ“ä½œæ•°æ—¶ï¼Œéƒ½å°†å…¶è½¬åŒ–ä¸ºå¸ƒå°”å€¼ã€‚å¦‚æœç»“æœæ˜¯ `true`ï¼Œå°±åœæ­¢è®¡ç®—ï¼Œè¿”å›è¿™ä¸ªæ“ä½œæ•°çš„åˆå§‹å€¼ã€‚
- å¦‚æœæ‰€æœ‰çš„æ“ä½œæ•°éƒ½è¢«è®¡ç®—è¿‡ï¼ˆä¹Ÿå°±æ˜¯ï¼Œè½¬æ¢ç»“æœéƒ½æ˜¯ `false`ï¼‰ï¼Œåˆ™è¿”å›æœ€åä¸€ä¸ªæ“ä½œæ•°ã€‚
- è¿”å›çš„å€¼æ˜¯æ“ä½œæ•°çš„åˆå§‹å½¢å¼ï¼Œä¸ä¼šåšå¸ƒå°”è½¬æ¢ã€‚

æ¢å¥è¯è¯´ï¼Œ**ä¸€ä¸ªæˆ–è¿ç®— `||` çš„é“¾ï¼Œå°†è¿”å›ç¬¬ä¸€ä¸ªçœŸå€¼ï¼Œå¦‚æœä¸å­˜åœ¨çœŸå€¼ï¼Œå°±è¿”å›è¯¥é“¾çš„æœ€åä¸€ä¸ªå€¼ã€‚**

ä¾‹å¦‚ï¼š

```js
console.log(1 || 0) // 1ï¼ˆ1 æ˜¯çœŸå€¼ï¼‰
console.log(null || 1) // 1ï¼ˆ1 æ˜¯ç¬¬ä¸€ä¸ªçœŸå€¼ï¼‰
console.log(null || 0 || 1) // 1ï¼ˆç¬¬ä¸€ä¸ªçœŸå€¼ï¼‰
console.log(undefined || null || 0) // 0ï¼ˆéƒ½æ˜¯å‡å€¼ï¼Œè¿”å›æœ€åä¸€ä¸ªå€¼ï¼‰
```

#### ä¸è¿ç®—å¯»æ‰¾ç¬¬ä¸€ä¸ªå‡å€¼

ä¸è¿ç®— `&&` åšäº†å¦‚ä¸‹çš„äº‹ï¼š

- ä»å·¦åˆ°å³ä¾æ¬¡è®¡ç®—æ“ä½œæ•°ã€‚
- åœ¨å¤„ç†æ¯ä¸€ä¸ªæ“ä½œæ•°æ—¶ï¼Œéƒ½å°†å…¶è½¬åŒ–ä¸ºå¸ƒå°”å€¼ã€‚å¦‚æœç»“æœæ˜¯ `false`ï¼Œå°±åœæ­¢è®¡ç®—ï¼Œå¹¶è¿”å›è¿™ä¸ªæ“ä½œæ•°çš„åˆå§‹å€¼ã€‚
- å¦‚æœæ‰€æœ‰çš„æ“ä½œæ•°éƒ½è¢«è®¡ç®—è¿‡ï¼ˆä¾‹å¦‚éƒ½æ˜¯çœŸå€¼ï¼‰ï¼Œåˆ™è¿”å›æœ€åä¸€ä¸ªæ“ä½œæ•°ã€‚
- æ¢å¥è¯è¯´ï¼Œ**ä¸è¿ç®—è¿”å›ç¬¬ä¸€ä¸ªå‡å€¼ï¼Œå¦‚æœæ²¡æœ‰å‡å€¼å°±è¿”å›æœ€åä¸€ä¸ªå€¼ã€‚**

ä¸Šé¢çš„è§„åˆ™å’Œæˆ–è¿ç®—å¾ˆåƒã€‚åŒºåˆ«å°±æ˜¯ä¸è¿ç®—è¿”å›ç¬¬ä¸€ä¸ªå‡å€¼ï¼Œè€Œæˆ–è¿ç®—è¿”å›ç¬¬ä¸€ä¸ªçœŸå€¼ã€‚

ä¾‹å¦‚ï¼š

```js
// å¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯çœŸå€¼ï¼Œ
// ä¸è¿ç®—è¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°ï¼š
console.log(1 && 0) // 0
console.log(1 && 5) // 5

// å¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯å‡å€¼ï¼Œ
// ä¸è¿ç®—å°†ç›´æ¥è¿”å›å®ƒã€‚ç¬¬äºŒä¸ªæ“ä½œæ•°ä¼šè¢«å¿½ç•¥
console.log(null && 5) // null
console.log(0 && 'no matter what') // 0
```

#### æ„Ÿå¹ç¬¦å· `!` è¡¨ç¤ºå¸ƒå°”éè¿ç®—ç¬¦

é€»è¾‘éè¿ç®—ç¬¦æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå¹¶æŒ‰å¦‚ä¸‹è¿ä½œï¼š

- å°†æ“ä½œæ•°è½¬åŒ–ä¸ºå¸ƒå°”ç±»å‹ï¼š`true/false`ã€‚
- è¿”å›ç›¸åçš„å€¼ã€‚

ä¾‹å¦‚ï¼š

```js
console.log(!true) // false
console.log(!0) // true
```

ä¸¤ä¸ªéè¿ç®— `!!` æœ‰æ—¶å€™ç”¨æ¥å°†æŸä¸ªå€¼è½¬åŒ–ä¸ºå¸ƒå°”ç±»å‹ï¼Œç­‰åŒäºå†…ç½®çš„ `Boolean` å‡½æ•°ï¼š

```js
console.log(!!'non-empty string') // true
console.log(!!null) // false
console.log(Boolean('non-empty string')) // true
console.log(Boolean(null)) // false
```

ä¹Ÿå°±æ˜¯ï¼Œç¬¬ä¸€ä¸ªéè¿ç®—å°†è¯¥å€¼è½¬åŒ–ä¸ºå¸ƒå°”ç±»å‹å¹¶å–åï¼Œç¬¬äºŒä¸ªéè¿ç®—å†æ¬¡å–åã€‚æœ€åæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªä»»æ„å€¼åˆ°å¸ƒå°”å€¼çš„è½¬åŒ–ã€‚

### ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ '??'

- å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯ `null/undefined`ï¼Œåˆ™ `??` è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°ã€‚å¦åˆ™ï¼Œè¿”å›ç¬¬äºŒä¸ªå‚æ•°ã€‚
- ä¸ `||` ç›¸æ¯”ï¼Œ`||` æ— æ³•åŒºåˆ† `false`ã€`0`ã€ç©ºå­—ç¬¦ä¸² `""` å’Œ `null/undefined`ã€‚å®ƒä»¬éƒ½ä¸€æ · â€”â€” å‡å€¼ï¼ˆfalsy valuesï¼‰ã€‚å¦‚æœå…¶ä¸­ä»»ä½•ä¸€ä¸ªæ˜¯ `|`| çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†å¾—åˆ°ç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºç»“æœã€‚
- `??` è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§éå¸¸ä½ï¼Œä»…ç•¥é«˜äº `?` å’Œ `=`ï¼Œå› æ­¤åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨å®ƒæ—¶è¯·è€ƒè™‘æ·»åŠ æ‹¬å·ã€‚
- å¦‚æœæ²¡æœ‰æ˜ç¡®æ·»åŠ æ‹¬å·ï¼Œä¸èƒ½å°†å…¶ä¸ `||` æˆ– `&&` ä¸€èµ·ä½¿ç”¨ã€‚

```js
let user1
console.log(user1 ?? 'Anonymous') // Anonymous
let user2 = 'John'
console.log(user2 ?? 'Anonymous') // John
```

### å¯é€‰é“¾ "?."

å¯é€‰é“¾ `?.` è¯­æ³•æœ‰ä¸‰ç§å½¢å¼ï¼š

1. `obj?.prop` â€”â€” å¦‚æœ `obj` å­˜åœ¨åˆ™è¿”å› `obj.prop`ï¼Œå¦åˆ™è¿”å› `undefined`ã€‚
2. `obj?.[prop]` â€”â€” å¦‚æœ `obj` å­˜åœ¨åˆ™è¿”å› `obj[prop]`ï¼Œå¦åˆ™è¿”å› `undefined`ã€‚
3. `obj.method?.()` â€”â€” å¦‚æœ `obj.method` å­˜åœ¨åˆ™è°ƒç”¨ `obj.method()`ï¼Œå¦åˆ™è¿”å› `undefined`ã€‚

æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œè¿™äº›è¯­æ³•å½¢å¼ç”¨èµ·æ¥éƒ½å¾ˆç®€å•ç›´æ¥ã€‚`?.` æ£€æŸ¥å·¦è¾¹éƒ¨åˆ†æ˜¯å¦ä¸º `null/undefined`ï¼Œå¦‚æœä¸æ˜¯åˆ™ç»§ç»­è¿ç®—ã€‚

`?.` é“¾ä½¿æˆ‘ä»¬èƒ½å¤Ÿå®‰å…¨åœ°è®¿é—®åµŒå¥—å±æ€§ã€‚

### è¿ç®—ç¬¦ä¼˜å…ˆçº§

![è¿ç®—ç¬¦ä¼˜å…ˆçº§](operator.png)

## å¾ªç¯

- é€šå¸¸æ¡ä»¶ä¸ºå‡æ—¶ï¼Œå¾ªç¯ä¼šç»ˆæ­¢ã€‚ä½†æˆ‘ä»¬éšæ—¶éƒ½å¯ä»¥ä½¿ç”¨ break æŒ‡ä»¤å¼ºåˆ¶é€€å‡ºã€‚
- `continue` æŒ‡ä»¤æ˜¯ `break` çš„â€œè½»é‡ç‰ˆâ€ã€‚å®ƒä¸ä¼šåœæ‰æ•´ä¸ªå¾ªç¯ã€‚è€Œæ˜¯åœæ­¢å½“å‰è¿™ä¸€æ¬¡è¿­ä»£ï¼Œå¹¶å¼ºåˆ¶å¯åŠ¨æ–°ä¸€è½®å¾ªç¯ï¼ˆå¦‚æœæ¡ä»¶å…è®¸çš„è¯ï¼‰ã€‚
- `switch` è¯­å¥æœ‰è‡³å°‘ä¸€ä¸ª `case` ä»£ç å—å’Œä¸€ä¸ªå¯é€‰çš„ `default` ä»£ç å—ã€‚å¦‚æœæ²¡æœ‰ `break`ï¼Œç¨‹åºå°†ä¸ç»è¿‡ä»»ä½•æ£€æŸ¥å°±ä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ª `case`ã€‚
- `switch/case` æœ‰é€šè¿‡ `case` è¿›è¡Œâ€œåˆ†ç»„â€çš„èƒ½åŠ›ï¼Œå…¶å®æ˜¯ `switch`è¯­å¥æ²¡æœ‰ `break` æ—¶çš„å‰¯ä½œç”¨ã€‚
- for å¾ªç¯è¿˜æœ‰ä¸€ä¸ªç‰¹åˆ«ä¹‹å¤„ï¼Œå°±æ˜¯è®¾ç½®å¾ªç¯å˜é‡çš„é‚£éƒ¨åˆ†æ˜¯ä¸€ä¸ªçˆ¶ä½œç”¨åŸŸï¼Œè€Œå¾ªç¯ä½“å†…éƒ¨æ˜¯ä¸€ä¸ªå•ç‹¬çš„å­ä½œç”¨åŸŸã€‚

```js
const arr = [1, 2, 3]

for (let i = 0; i < arr.length; i++) {
  const i = 'abc'
  // å¾ªç¯ä½“ä¸­çš„ä½œç”¨åŸŸæ˜¯æ‹¬å·ä¸­ä½œç”¨åŸŸçš„å­ä½œç”¨åŸŸ
  console.log(i)
}

console.log(i) // i is not defined
```
